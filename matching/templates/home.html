{% extends "base.html" %}
{% block content %}
<script>
    $(function() {
      $("#tags").autocomplete({
        source: "get_movies/",
        minLength: 1,
        select: function(event, ui) {
            if(ui.item){
                console.log(ui.item);
                $('#tags').val(ui.item.value);
            }
            $.ajax({
                url : "find_movies/",
                type : "POST",
                data : { the_post : ui.item },


                success : function(json) {
                    var total = '';
                    for (i = 0; i < json.length; i++) {
                        total += '<div class="col-xs-12 col-md-6 col-lg-4 movie-container"><div class="movie">'+json[i]['title']+'<img border="0" alt="W3Schools" src="'+json[i]['poster']+'" width="100" height="100"></div></div>';
                    }
                    $('#movie-list').html(total);

                },

                error : function(xhr,errmsg,err) {
                    $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                        " <a href='#' class='close'>&times;</a></div>");
                    console.log(xhr.status + ": " + xhr.responseText);
                }
            });
        }
      });
    });
</script>
<div class="ui-widget movie-find">
    <div class="input-group input-group-lg">
        <span class="input-group-addon" id="sizing-addon1"><span class="glyphicon glyphicon-film" aria-hidden="true"></span></span>
        <input type="text" class="form-control" placeholder="Dernier film visionnÃ©..." id="tags" aria-describedby="sizing-addon1">
    </div>
</div>
<div class="container-fluid">
    <div class="row" id="movie-list">
    </div>
</div>

{% endblock %}